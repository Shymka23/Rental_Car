'use client';

import Link from 'next/link';
import { NavLink } from './nav-link';
import { useState } from 'react';
import { Menu } from 'lucide-react';
import { Button } from '@/components/ui/button';
import {
  Sheet,
  SheetContent,
  SheetHeader,
  SheetTitle,
  SheetTrigger,
} from '@/components/ui/sheet';

const Logo = () => (
  <svg
    width="105"
    height="16"
    viewBox="0 0 105 16"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    className="h-4 w-auto"
  >
    <path d="M104.071 7.64526C103.388 7.64526 102.764 7.68467 102.199 7.76349C101.634 7.84231 101.023 7.99994 100.367 8.2364V15.7635H96.938V4.57136H99.4799L99.9922 5.89156C100.675 5.33984 101.345 4.94575 102.002 4.7093C102.659 4.47284 103.349 4.35461 104.071 4.35461V7.64526Z" fill="#3470FF" />
    <path d="M95.2984 15.6453C94.878 15.7373 94.5036 15.803 94.1752 15.8424C93.8599 15.8818 93.4855 15.9015 93.052 15.9015C91.791 15.9015 90.9634 15.4943 90.5693 14.6798C90.0176 15.087 89.4658 15.3957 88.9141 15.6059C88.3624 15.8161 87.7581 15.9212 87.1013 15.9212C86.5102 15.9212 85.9781 15.7964 85.5052 15.5468C85.0323 15.2972 84.6645 14.9622 84.4018 14.5419C84.1391 14.1215 84.0077 13.6617 84.0077 13.1626C84.0077 12.3218 84.2179 11.6585 84.6382 11.1724C85.0717 10.6732 85.6497 10.2791 86.3722 9.99014C87.0947 9.68801 88.1916 9.32676 89.6629 8.9064L90.254 8.72906V8.65024C90.254 7.4417 89.7023 6.83743 88.5988 6.83743C88.0602 6.83743 87.4823 6.95566 86.8648 7.19211C86.2474 7.42856 85.5381 7.80952 84.7368 8.33497L84.0865 5.97043C84.9798 5.45812 85.8862 5.05746 86.8057 4.76846C87.7384 4.47946 88.7236 4.33496 89.7614 4.33496C91.0225 4.33496 91.988 4.67651 92.658 5.35959C93.3411 6.04268 93.6826 7.21181 93.6826 8.86699V12.6108C93.6826 12.8998 93.7417 13.11 93.8599 13.2414C93.9782 13.3596 94.1686 13.4187 94.4314 13.4187C94.681 13.4187 94.9305 13.3859 95.1801 13.3202L95.2984 15.6453ZM87.4363 12.7094C87.4363 12.9721 87.502 13.1626 87.6333 13.2808C87.7778 13.399 88.0011 13.4581 88.3033 13.4581C88.855 13.4581 89.5053 13.2217 90.254 12.7488V10.6601L89.9585 10.7586C88.9732 11.1133 88.3033 11.4286 87.9486 11.7044C87.607 11.9672 87.4363 12.3021 87.4363 12.7094Z" fill="#3470FF" />
    <path d="M78.1822 15.9999C76.5533 15.9999 75.174 15.6847 74.0443 15.0541C72.9146 14.4105 72.0673 13.5632 71.5024 12.5123C70.9507 11.4482 70.6748 10.2922 70.6748 9.04427C70.6748 7.80946 70.9638 6.6666 71.5418 5.61569C72.133 4.56479 73.0065 3.72406 74.1625 3.09352C75.3185 2.46298 76.711 2.14771 78.3399 2.14771C79.8637 2.14771 81.2036 2.44327 82.3596 3.03441L81.6502 5.51717C81.1642 5.26758 80.6584 5.07054 80.133 4.92604C79.6075 4.7684 79.0098 4.68958 78.3399 4.68958C77.486 4.68958 76.7438 4.88663 76.1133 5.28072C75.4959 5.66167 75.023 6.18712 74.6946 6.85707C74.3793 7.51389 74.2216 8.24952 74.2216 9.06397C74.2216 10.3513 74.5632 11.4088 75.2463 12.2364C75.9294 13.0508 76.908 13.4581 78.1822 13.4581C79.2726 13.4581 80.4483 13.1888 81.7093 12.6502L82.3793 15.0738C81.8407 15.3497 81.197 15.573 80.4483 15.7438C79.6995 15.9146 78.9442 15.9999 78.1822 15.9999Z" fill="#3470FF" />
    <path d="M64.7835 0H68.2121V15.7636H64.7835V0Z" fill="#101828" />
    <path d="M63.1439 15.6453C62.7235 15.7373 62.3491 15.803 62.0207 15.8424C61.7055 15.8818 61.3311 15.9015 60.8976 15.9015C59.6365 15.9015 58.8089 15.4943 58.4148 14.6798C57.8631 15.087 57.3114 15.3957 56.7596 15.6059C56.2079 15.8161 55.6036 15.9212 54.9468 15.9212C54.3557 15.9212 53.8237 15.7964 53.3508 15.5468C52.8779 15.2972 52.51 14.9622 52.2473 14.5419C51.9846 14.1215 51.8532 13.6617 51.8532 13.1626C51.8532 12.3218 52.0634 11.6585 52.4838 11.1724C52.9173 10.6732 53.4953 10.2791 54.2178 9.99014C54.9403 9.68801 56.0371 9.32676 57.5084 8.9064L58.0995 8.72906V8.65024C58.0995 7.4417 57.5478 6.83743 56.4444 6.83743C55.9058 6.83743 55.3278 6.95566 54.7104 7.19211C54.093 7.42856 53.3836 7.80952 52.5823 8.33497L51.932 5.97043C52.8253 5.45812 53.7317 5.05746 54.6513 4.76846C55.5839 4.47946 56.5692 4.33496 57.6069 4.33496C58.868 4.33496 59.8335 4.67651 60.5035 5.35959C61.1866 6.04268 61.5281 7.21181 61.5281 8.86699V12.6108C61.5281 12.8998 61.5872 13.11 61.7055 13.2414C61.8237 13.3596 62.0142 13.4187 62.2769 13.4187C62.5265 13.4187 62.7761 13.3859 63.0257 13.3202L63.1439 15.6453ZM55.2818 12.7094C55.2818 12.9721 55.3475 13.1626 55.4789 13.2808C55.6234 13.399 55.8467 13.4581 56.1488 13.4581C56.7005 13.4581 57.3508 13.2217 58.0995 12.7488V10.6601L57.804 10.7586C56.8188 11.1133 56.1488 11.4286 55.7941 11.7044C55.4526 11.9672 55.2818 12.3021 55.2818 12.7094Z" fill="#101828" />
    <path d="M50.6242 15.0345C50.2301 15.3104 49.7572 15.5271 49.2054 15.6848C48.6669 15.8293 48.1414 15.9015 47.6291 15.9015C46.2366 15.9015 45.1989 15.5994 44.5158 14.9951C43.8327 14.3777 43.4911 13.4976 43.4911 12.3547V6.99508H41.8163V5.55666L43.9246 4.70936L44.8705 1.69458H46.9197V4.57143H50.0724V6.99508H46.9197V11.5271C46.9197 12.2233 47.0314 12.7159 47.2547 13.0049C47.478 13.2939 47.813 13.4384 48.2596 13.4384C48.8376 13.4384 49.4485 13.2677 50.0921 12.9261L50.6242 15.0345Z" fill="#101828" />
    <path d="M36.1902 4.33496C37.6483 4.33496 38.6532 4.72248 39.205 5.49752C39.7698 6.27257 40.0523 7.38915 40.0523 8.84728V15.7636H36.6237V9.28078C36.6237 8.36124 36.512 7.72413 36.2887 7.36945C36.0785 7.01477 35.6647 6.83743 35.0473 6.83743C34.3774 6.83743 33.6943 7.06075 32.9981 7.50738V15.7636H29.5695V4.57142H32.1113L32.466 5.49752C33.7534 4.72248 34.9948 4.33496 36.1902 4.33496Z" fill="#101828" />
    <path d="M20.0284 10.798C20.094 11.7307 20.3239 12.4204 20.718 12.867C21.1121 13.3136 21.7164 13.5369 22.5308 13.5369C23.1351 13.5369 23.6934 13.4319 24.2057 13.2217C24.7312 12.9984 25.3289 12.67 25.9988 12.2365L26.9249 14.4039C26.2287 14.9688 25.539 15.376 24.856 15.6256C24.1729 15.8752 23.3913 16 22.5111 16C21.2106 16 20.1203 15.7504 19.2402 15.2512C18.36 14.7389 17.7032 14.0493 17.2697 13.1823C16.8494 12.3021 16.6392 11.3038 16.6392 10.1872C16.6392 8.41379 17.1384 6.99506 18.1367 5.93102C19.1351 4.86698 20.5932 4.33496 22.5111 4.33496C24.0349 4.33496 25.1909 4.74875 25.9791 5.57634C26.7804 6.39079 27.1877 7.55336 27.2008 9.06403C27.2008 9.65517 27.1154 10.2332 26.9446 10.798H20.0284ZM23.8707 8.57142C23.8839 8.4926 23.8904 8.38751 23.8904 8.25615C23.8773 7.71756 23.7328 7.31034 23.4569 7.03447C23.1811 6.74547 22.8001 6.60098 22.3141 6.60098C21.1581 6.60098 20.4356 7.25779 20.1466 8.57142H23.8707Z" fill="#101828" />
    <path d="M8.43843 10.8374H6.5468V15.7635H3V2.3645H8.35962C10.2775 2.3645 11.6765 2.69291 12.5567 3.34972C13.4368 3.9934 13.8769 5.01147 13.8769 6.40392C13.8769 8.21673 13.2135 9.43184 11.8867 10.0492L15.6503 15.7635H11.5517L8.43843 10.8374ZM6.5468 8.37436H8.35962C9.05584 8.37436 9.55502 8.22987 9.85716 7.94087C10.1724 7.65187 10.3301 7.20523 10.3301 6.60096C10.3301 5.97042 10.179 5.51722 9.87686 5.24135C9.57472 4.96549 9.06898 4.82756 8.35962 4.82756H6.5468V8.37436Z" fill="#101828" />
  </svg>
);

export function Header() {
  const [isMenuOpen, setIsMenuOpen] = useState(false);

  const navLinks = (
    <>
      <NavLink href="/">Home</NavLink>
      <NavLink href="/catalog">Catalog</NavLink>
      <NavLink href="/favorites">Favorites</NavLink>
    </>
  );

  return (
    <header className="sticky top-0 z-50 w-full border-b bg-muted/60 backdrop-blur supports-[backdrop-filter]:bg-muted/60">
      <div className="container flex h-16 items-center justify-between px-4 sm:px-8 md:px-16 lg:px-32 py-6">
        <Link
          href="/"
          className="flex items-center gap-2 font-bold text-lg mr-6"
        >
          <Logo />
        </Link>
        
        <div className="md:hidden">
          <Sheet open={isMenuOpen} onOpenChange={setIsMenuOpen}>
            <SheetTrigger asChild>
              <Button variant="ghost" size="icon">
                <Menu className="h-6 w-6" />
                <span className="sr-only">Open menu</span>
              </Button>
            </SheetTrigger>
            <SheetContent side="right" className="w-[250px]">
               <SheetHeader>
                <SheetTitle className="sr-only">Menu</SheetTitle>
                <Link
                  href="/"
                  className="flex items-center gap-2 font-bold text-lg mb-8"
                  onClick={() => setIsMenuOpen(false)}
                >
                  <Logo />
                </Link>
              </SheetHeader>
              <nav className="flex flex-col items-start gap-6 text-lg font-medium">
                {navLinks}
              </nav>
            </SheetContent>
          </Sheet>
        </div>
       
        <nav className="hidden md:flex items-center gap-8 text-base font-medium">
          {navLinks}
        </nav>
      </div>
    </header>
  );
}
